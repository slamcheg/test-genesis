Genesis Test
===============================

Проект запускался на :
 - `Docker version 18.05.0-ce, build f150324`
 - `docker-compose version 1.18.0, build 8dd22a9`

Установка проекта
--------------------------------
Для того чтобы подготовить проект к запуску нужно исполнить следуйщие команды:

Находясь в дериктории проекта:
 - `sudo docker-compose build`
 - `sudo docker-compose up`
Далее перейти в контейнер php:
 - `sudo docker-compose exec php bash`
 
И запустить исполняемый файл в консоли
 - `./bin/console`  
После запуска файла он выдаст возможные команды для запуска

Использоавине комманд
-----------------
Для того чтобы создать таблы в базе нужно выполнить команду

 - `./bin/console db:migrate up` - Создание таблиц
 - `./bin/console db:migrate down` - Удаление таблиц
 
После того как база будет готова к работе вы можете выполнить одну из команд

- `./bin/console app:parse` - Эта консольная команда принимает 2 параметра 
`--id=` либо `--csv=` В первом случае будет выполнен парсинг пользователя с определенным `id`
во втором вам нужно указать путь к файлу где лежит `csv`.

Полный пример комманды:
- `./bin/console app:parse --id=224187981`
- `./bin/console app:parse --csv=/public/ids.csv`

Далее если вы желаете увидеть что в итоге было сохранено в базу то вы можете выполнить команду:
- `./bin/console app:user:info` - При выполение команды с параметром `--id=` то в консоль будет совершен вывод 
результата по опеределенному пользователю по дефолту будет выведен весь результат.

Warning
----------------------- 
Для того чтобы у пользователя можно было просмотреть альбомы пользователь должен состоять в приложении либо 
аккаунт пользователя должен быть полностью открыт, иначе при попытке спарсить фотографии пользователя по `id` api веренет `Access Denied`  

Структура проекта
-------------
В проекте использовались две 3-rd party библиотеки:

 - `"symfony/console": "^4.1"` - Для работы с консолью
 - `"vkcom/vk-php-sdk": "^0.2.0"` - Для работы с Api Vk

-------------------
```
app
    bin/                 Содержит исполняемый файл для выполнения комманд
    config/              Содержит файлы конфигурации базы/vk-ap 
    public/              Содержит csv для id
    src/
       Commands/         Содержит доступные консольные команды приложения
       Components/       Содержит классы для раборты с приложением
       Migrations/       Сожержит файлы миграциий для бд
       Repositiries/     Содержин репозитории для работы с таблицами бд
    vendor/              Содержит библиотеки подключаемые композером
```

